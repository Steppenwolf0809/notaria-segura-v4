{
  "permissions": {
    "allow": [
      "Bash(npm test)",
      "Bash(node:*)",
      "Bash(mv:*)",
      "Bash(npm start)",
      "Bash(grep:*)",
      "Bash(timeout 5s npm start)",
      "Bash(timeout 10s npm start)",
      "Bash(npm run:*)",
      "Bash(timeout 10s npm run dev)",
      "Bash(find:*)",
      "Bash(rm:*)",
      "Bash(npx prisma generate:*)",
      "Bash(npx prisma:*)",
      "Bash(npx eslint:*)",
      "Bash(sqlite3:*)",
      "Bash(timeout 5s npm run dev)",
      "Bash(git add:*)",
      "Bash(mkdir:*)",
      "Bash(timeout:*)",
      "Bash(pkill:*)",
      "Bash(true)",
      "Bash(PORT=3001 timeout 5s node server.js)",
      "Bash(npm install:*)",
      "Bash(chmod:*)",
      "Bash(NODE_ENV=development timeout 5s node server.js)",
      "Bash(apt list:*)",
      "Bash(docker run:*)",
      "Bash(sudo:*)",
      "Bash(psql:*)",
      "Bash(service postgresql:*)",
      "Bash(systemctl status:*)",
      "Bash(pg_ctl:*)",
      "Bash(printenv:*)",
      "Bash(docker-compose up:*)",
      "Bash(./setup-database.sh:*)",
      "Bash(bash:*)",
      "Bash(npm view:*)",
      "WebFetch(domain:express-rate-limit.github.io)",
      "Bash(echo:*)",
      "Bash(cat:*)",
      "Bash(NODE_ENV=production npx prisma db push --accept-data-loss)",
      "Bash(npx vite build:*)",
      "Bash(sed:*)",
      "Bash(pg_config:*)",
      "Bash(npm test:*)",
      "Bash(gh pr create:*)",
      "Bash(\"/c/Program Files/GitHub CLI/gh.exe\" pr create --title \"fix: corregir modal de historial para roles RECEPCION, ARCHIVO y MATRIZADOR\" --body \"$\\(cat <<''EOF''\n## Summary\n- Corrige problema donde el modal de historial de documentos no se renderizaba para los roles RECEPCION, ARCHIVO y MATRIZADOR\n- El problema era una inconsistencia en los permisos de `getDocumentById` que restring铆a a ARCHIVO a solo documentos asignados\n- Mejora la estabilidad del componente DocumentTimeline con mejor manejo de estados\n\n## Cambios\n- **Backend**: Permitir que ARCHIVO vea todos los documentos en `getDocumentById` \\(alineando con `getDocumentHistory`\\)\n- **Frontend**: Agregar campo `initialized` en `useDocumentHistory` para evitar estados indefinidos\n- **Frontend**: Mejorar manejo de errores en `DocumentTimeline` con opci贸n de reintentar\n\n## Test plan\n- [ ] Verificar que RECEPCION puede ver el historial de cualquier documento\n- [ ] Verificar que ARCHIVO puede ver el historial en Supervisi贸n y en Mis Documentos\n- [ ] Verificar que MATRIZADOR puede ver el historial de documentos asignados a 茅l\n- [ ] Verificar que ADMIN sigue viendo todo correctamente\n- [ ] Verificar que el skeleton de carga aparece correctamente\n- [ ] Verificar que el bot贸n \"Reintentar\" funciona en caso de error\n\n Generated with [Claude Code]\\(https://claude.com/claude-code\\)\nEOF\n\\)\")",
      "Bash(git commit -m \"$\\(cat <<''EOF''\nfix: cargar documento completo al abrir modal para resolver historial vac铆o\n\nEl modal ahora carga el documento completo desde la API al abrirse,\nen lugar de depender 煤nicamente de los datos parciales de la tabla.\n\nCambios:\n- Agregar carga as铆ncrona del documento por ID al abrir el modal\n- Mostrar estado de carga mientras se obtiene el documento\n- Usar datos parciales como fallback si la carga falla\n- Mejorar validaci贸n del documentId para el timeline\n\nEsto resuelve el problema donde el historial no se mostraba porque\nel documento pasado desde la tabla pod铆a estar incompleto.\n\nCo-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git push:*)",
      "Bash(git commit:*)",
      "Bash(ls:*)",
      "Bash(PGPASSWORD=vzdzHHIVerdjgzWlmfARWiSsbTBSJfvw psql:*)",
      "Bash(DATABASE_URL=\"postgresql://postgres:vzdzHHIVerdjgzWlmfARWiSsbTBSJfvw@gondola.proxy.rlwy.net:39316/railway\" npx prisma db push:*)",
      "Bash(DATABASE_URL=\"postgresql://postgres:vzdzHHIVerdjgzWlmfARWiSsbTBSJfvw@gondola.proxy.rlwy.net:39316/railway\" node scripts/migrate-payment-allocations.js:*)",
      "Bash(DATABASE_URL=\"postgresql://postgres:vzdzHHIVerdjgzWlmfARWiSsbTBSJfvw@gondola.proxy.rlwy.net:39316/railway\" node:*)",
      "Bash(DATABASE_URL=\"postgresql://postgres:vzdzHHIVerdjgzWlmfARWiSsbTBSJfvw@gondola.proxy.rlwy.net:39316/railway\" node scripts/check-allocations.js:*)",
      "Bash(dir /s /b C:notaria-segurasync-agent)",
      "Bash(findstr:*)",
      "Bash(DATABASE_URL=\"postgresql://postgres:uXwrkbpPDVXrEngsRCMHdIKkOUDXipic@switchback.proxy.rlwy.net:25513/railway\" npx prisma db push:*)",
      "Bash(git -C \"C:\\\\notaria-segura\" status)",
      "Bash(git -C \"C:\\\\notaria-segura\" diff frontend/src/components/bulk/BulkDeliveryModal.jsx frontend/src/components/recepcion/BulkDeliveryDialog.jsx)",
      "Bash(git -C \"C:\\\\notaria-segura\" log --oneline -5)",
      "Bash(git -C \"C:\\\\notaria-segura\" add frontend/src/components/bulk/BulkDeliveryModal.jsx frontend/src/components/recepcion/BulkDeliveryDialog.jsx)",
      "Bash(git -C \"C:\\\\notaria-segura\" commit -m \"$\\(cat <<''EOF''\nfix: entrega grupal validaba nombre obligatorio pese a estar pre-llenado\n\n- Evitar que re-renders del useEffect reseteen el formulario usando ref\n- Asegurar que entregadoA/personaRetira siempre sea string \\(no null/undefined\\)\n- Pre-llenar siempre con el nombre del primer cliente disponible\n- Robustecer validaci贸n con String\\(\\) antes de .trim\\(\\)\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C \"C:\\\\notaria-segura\" push origin main)",
      "Bash(git -C \"C:\\\\notaria-segura\" diff frontend/src/components/recepcion/BulkDeliveryDialog.jsx)",
      "Bash(git -C \"C:\\\\notaria-segura\" add frontend/src/components/recepcion/BulkDeliveryDialog.jsx)",
      "Bash(git -C \"C:\\\\notaria-segura\" commit -m \"$\\(cat <<''EOF''\nfix: corregir nombres de campos en payload de entrega grupal\n\nEl frontend enviaba deliveredTo/receptorId/relationType/observations\npero el backend esperaba entregadoA/cedulaReceptor/relacionTitular/observaciones.\nEste mismatch causaba que entregadoA fuera undefined y la validaci贸n\nsiempre rechazara con \"nombre de quien retira es obligatorio\".\n\nCo-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>\nEOF\n\\)\")"
    ],
    "deny": []
  }
}
